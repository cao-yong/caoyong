<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta charset="utf-8"/>
    <title>康福特博商城-后台管理系统</title>
    <meta name="description" content="overview &amp; stats"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
   <!-- bootstrap & fontawesome -->
    <link rel="stylesheet" href="${request.contextPath}/static/assets/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="${request.contextPath}/static/assets/font-awesome/4.5.0/css/font-awesome.min.css"/>
    <!-- page specific plugin styles -->
	<link rel="stylesheet" href="${request.contextPath}/static/assets/css/jquery-ui.min.css" />
	<link rel="stylesheet" href="${request.contextPath}/static/assets/css/ui.jqgrid.min.css" />
    <!-- text fonts -->
    <link rel="stylesheet" href="${request.contextPath}/static/assets/css/fonts.googleapis.com.css"/>
    <!-- ace styles -->
    <link rel="stylesheet" href="${request.contextPath}/static/assets/css/ace.min.css" class="ace-main-stylesheet"
          id="main-ace-style"/>
    <link rel="stylesheet" href="${request.contextPath}/static/assets/css/ace-skins.min.css"/>
    <link rel="stylesheet" href="${request.contextPath}/static/assets/css/ace-rtl.min.css"/>
    <!-- flieinput -->
    <link rel="stylesheet" href="${request.contextPath}/static/stylesheets/fileinput.css"/>
    <link rel="stylesheet" href="${request.contextPath}/static/stylesheets/all-krajee.css"/>
    <!-- ace settings handler -->
    <script src="${request.contextPath}/static/assets/js/jquery-2.1.4.min.js"></script>
    <script src="${request.contextPath}/static/assets/js/ace-extra.min.js"></script>
    <script src="${request.contextPath}/static/assets/js/bootbox.min.js"></script>
    <script src="${request.contextPath}/static/assets/js/user/base.js"></script>

    <link rel="stylesheet" href="${request.contextPath}/static/stylesheets/console.css" />
</head>

<body class="skin-2" style="background-color: #FFF;">
<div class="tabbable">
	<div class="tab-content">
		<!-- 基本信息开始 -->
		<div id="tab1" class="tab-pane in active">
			<form class="form-horizontal" id="brandForm" role="form">
				<input type="hidden" id="imgUrl" name="imgUrl" value=${brand.imgUrl!}/>
				<input type="hidden" id="id" name="id" value="${brand.id!}"/>
				<div class="form-group">
					<label class="col-sm-3 control-label no-padding-right" for="form-field-1"> 品牌名称  </label>

					<div class="col-sm-9">
						<input type="text" id="name" name="name" value="${brand.name!}" placeholder="请输入品牌名称" style="width:258px"/>
					</div>
				</div>

				<div class="form-group">
					<label class="col-sm-3 control-label no-padding-right" for="form-field-1">上传品牌图片</label>
					<div class="col-sm-9">
						<input id="uploadImg" name="uploadImg" type="file">
					</div>
				</div>
	
				<div class="form-group">
					<label class="col-sm-3 control-label no-padding-right" for="form-field-1"> 品牌描述 </label>
					<div class="col-sm-9">
						<input type="text" id="description" name="description" value="${brand.description!}" placeholder="请输入品牌描述  " style="width:558px"/>
					</div>
				</div>
				
				<div class="form-group">
					<label class="col-sm-3 control-label no-padding-right" for="form-field-1"> 排序 </label>

					<div class="col-sm-9">
						<input type="text" id="sort" name="sort" value="${brand.sort!}" placeholder="请输入序号  " style="width:258px"/>
					</div>
				</div>
				
				<div class="form-group">
					<label class="col-sm-3 control-label no-padding-right" for="form-field-1"> 是否可用  </label>
					<div class="col-sm-9">
						<label class="pos-rel">
							<input name="isDisplay" type="checkbox" class="ace"  value="0" <#if brand?? && brand.isDisplay==0>checked="checked"</#if>/>
							<span class="lbl">否</span>
						</label>
						<label class="pos-rel">
							<input name="isDisplay" type="checkbox" class="ace"  value="1" <#if brand?? && brand.isDisplay==1>checked="checked"</#if>/>
							<span class="lbl">是</span>
						</label>
					</div>
				</div>
			</form>
		</div>
		<!-- 基本信息结束 -->
		
		<!-- 保存、取消 开始 -->
		<div class="clearfix form-actions">
			<div class="col-md-offset-4 col-md-8">
				<button id="submitBtn" class="btn btn-info" type="button">
					<i class="ace-icon fa fa-check bigger-110"></i>
					保存
				</button>
				<button class="btn btn-info" type="button" onclick="history.back();">
					<i class="ace-icon fa fa-times bigger-110"></i>
					取消
				</button>
			</div>
		</div>
		<!-- 保存、取消 结束 -->
	</div>
</div>
<script src="${request.contextPath}/static/assets/js/bootstrap.min.js"></script>

<!-- page specific plugin scripts -->
<script src="${request.contextPath}/static/assets/js/fileinput/fileinput.js"></script>
<script src="${request.contextPath}/static/assets/js/fileinput/fileinput_locale_zh.js"></script>
<!-- ace scripts -->
<script src="${request.contextPath}/static/assets/js/ace-elements.min.js"></script>
<script src="${request.contextPath}/static/assets/js/ace.min.js"></script>

<script type="text/javascript">
	$(document).on('ready', function() {
		var imgUrl = "${brand.imgUrl!}"
		var initialImg = [];
		if(imgUrl){
			initialImg = ["<img style='width:160px;height:160px' src='" + imgUrl + "' class='file-preview-image'>"];
		}
	    $("#uploadImg").fileinput({
	    	showCaption: false,
	    	language : 'zh',
	    	allowedPreviewTypes : [ 'image' ],
	    	allowedFileExtensions : [ 'jpg', 'png', 'gif' ],
	        maxFileSize : 2000,
	        dropZoneEnabled : false,
	        uploadUrl : "${request.contextPath}/upload/uploadFck.do",
	        initialPreview : initialImg,
	        previewClass : ""
	    }).on("fileuploaded", function(e, data) {
            var res = data.response;
            if(res.isSuccess){
				reminder("上传成功!")
				$('#imgUrl').val(res.url);
            }else{
            	reminder(res.errorMsg)
            }
        });
	});
	$(function() {
		//checkbox单选
		var isDisplay = $('input[name="isDisplay"]');
		isDisplay.click(function () {
			isDisplay.removeAttr("checked");
          	$(this).prop("checked", true);
        });
   		//提交表单
   		$('#submitBtn').click(function(){
   			//提交
   			var data = $("#brandForm").serializeObject();
   			$.ajax({
				url : '${request.contextPath}/brand/updateBrand.json',
				type : 'POST',
				data : data,
				success : function(result){
					if(result.success){
						window.location.href = '${request.contextPath}/brand/brandList.do';
					}else{
						reminder(result.msg);
					}
				}
			});
   		});
    });
</script>
</body>
</html>